<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Simple File Download Page</title>
    <style>
      /* Reset and base styles */
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
        line-height: 1.6;
        color: #333;
        background-color: #f9f9f9;
        max-width: 1000px;
        margin: 0 auto;
        padding: 20px;
      }

      /* Header styles */
      header {
        text-align: center;
        margin-bottom: 30px;
        padding-bottom: 20px;
        border-bottom: 1px solid #e1e1e1;
      }

      h1 {
        color: #2c3e50;
        margin-bottom: 10px;
        font-size: 1.8rem;
      }

      .subtitle {
        color: #7f8c8d;
        font-size: 1rem;
      }

      /* Main content */
      main {
        background-color: white;
        border-radius: 8px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
        padding: 25px;
        margin-bottom: 30px;
      }

      /* File list styles */
      .file-list-container {
        margin-top: 20px;
      }

      .file-list-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 15px;
        padding-bottom: 10px;
        border-bottom: 1px solid #eee;
      }

      .file-count {
        font-weight: 600;
        color: #3498db;
      }

      #searchBox {
        padding: 8px 12px;
        border: 1px solid #ddd;
        border-radius: 4px;
        width: 200px;
        font-size: 0.9rem;
      }

      .file-list {
        list-style-type: none;
      }

      .file-item {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 15px;
        margin-bottom: 10px;
        background-color: #f8fafc;
        border-radius: 6px;
        border-left: 4px solid #3498db;
        transition: all 0.2s ease;
      }

      .file-item:hover {
        background-color: #e8f4fc;
        transform: translateY(-2px);
        box-shadow: 0 3px 8px rgba(0, 0, 0, 0.08);
      }

      .file-info {
        display: flex;
        align-items: center;
      }

      .file-icon {
        margin-right: 12px;
        font-size: 1.5rem;
        color: #3498db;
      }

      .file-name {
        font-weight: 600;
        margin-bottom: 3px;
      }

      .file-size {
        font-size: 0.85rem;
        color: #7f8c8d;
      }

      .download-btn {
        background-color: #2ecc71;
        color: white;
        border: none;
        padding: 8px 16px;
        border-radius: 4px;
        cursor: pointer;
        font-weight: 600;
        transition: background-color 0.2s;
        text-decoration: none;
        display: inline-block;
        font-size: 0.9rem;
      }

      .download-btn:hover {
        background-color: #27ae60;
      }

      /* Loading and empty states */
      #loadingIndicator {
        text-align: center;
        padding: 30px;
        color: #7f8c8d;
      }

      .spinner {
        border: 3px solid #f3f3f3;
        border-top: 3px solid #3498db;
        border-radius: 50%;
        width: 40px;
        height: 40px;
        animation: spin 1s linear infinite;
        margin: 0 auto 15px;
      }

      @keyframes spin {
        0% {
          transform: rotate(0deg);
        }
        100% {
          transform: rotate(360deg);
        }
      }

      .empty-state {
        text-align: center;
        padding: 40px 20px;
        color: #7f8c8d;
      }

      .empty-state i {
        font-size: 3rem;
        margin-bottom: 15px;
        color: #bdc3c7;
      }

      /* Footer */
      footer {
        text-align: center;
        margin-top: 30px;
        padding-top: 20px;
        border-top: 1px solid #e1e1e1;
        color: #95a5a6;
        font-size: 0.9rem;
      }

      /* Responsive design */
      @media (max-width: 768px) {
        body {
          padding: 15px;
        }

        main {
          padding: 15px;
        }

        .file-list-header {
          flex-direction: column;
          align-items: flex-start;
        }

        #searchBox {
          width: 100%;
          margin-top: 10px;
        }

        .file-item {
          flex-direction: column;
          align-items: flex-start;
        }

        .download-btn {
          margin-top: 10px;
          align-self: flex-end;
        }
      }
    </style>
  </head>
  <body>
    <header>
      <h1>üìÅ File Download Repository</h1>
      <p class="subtitle">
        Simple, fast-loading page to download files from the data folder
      </p>
    </header>

    <main>
      <div class="file-list-container">
        <div class="file-list-header">
          <h2>
            Available Files
            <span class="file-count" id="fileCount">(0 files)</span>
          </h2>
          <input
            type="text"
            id="searchBox"
            placeholder="Search files..."
            aria-label="Search files"
          />
        </div>

        <div id="loadingIndicator">
          <div class="spinner"></div>
          <p>Loading files from data folder...</p>
        </div>

        <ul class="file-list" id="fileList">
          <!-- File list will be generated by JavaScript -->
        </ul>

        <div id="emptyState" class="empty-state" style="display: none">
          <div>üì≠</div>
          <h3>No files found</h3>
          <p>Try adjusting your search or check back later.</p>
        </div>
      </div>
    </main>

    <footer>
      <p>
        Hosted on GitHub Pages ‚Ä¢ Files are stored in the
        <code>/data</code> folder
      </p>
      <p>Page designed for fast loading even on slow internet connections</p>
    </footer>

    <script>
      // Sample file data - in a real scenario, you would fetch this from a server
      // For GitHub Pages, you would typically need to create a JSON file listing your data folder contents
      // or use the GitHub API. For simplicity, we'll simulate with sample data.

      // In a real implementation, you would replace this with actual file data
      // For example, if you have a JSON file at /data/files.json with file information
      // you could fetch it like: fetch('/data/files.json').then(...)

      // Sample file data structure
      const sampleFiles = [
        { name: "Documentation.pdf", size: "2.4 MB", type: "pdf" },
        { name: "Annual_Report_2023.xlsx", size: "1.8 MB", type: "excel" },
        { name: "Project_Overview.pptx", size: "5.2 MB", type: "powerpoint" },
        { name: "Data_Analysis.zip", size: "12.5 MB", type: "archive" },
        { name: "Code_Samples.js", size: "45 KB", type: "code" },
        { name: "Design_Assets.zip", size: "8.7 MB", type: "archive" },
        { name: "Meeting_Notes.docx", size: "320 KB", type: "word" },
        { name: "Budget_Planning.csv", size: "120 KB", type: "spreadsheet" },
        { name: "User_Manual.pdf", size: "3.1 MB", type: "pdf" },
        {
          name: "Presentation_Slides.pptx",
          size: "4.3 MB",
          type: "powerpoint",
        },
      ];

      // File type to icon mapping
      const fileTypeIcons = {
        pdf: "üìï",
        word: "üìÑ",
        excel: "üìä",
        powerpoint: "üìë",
        archive: "üì¶",
        code: "üíª",
        spreadsheet: "üìà",
        image: "üñºÔ∏è",
        video: "üé¨",
        audio: "üéµ",
        text: "üìù",
        default: "üìÅ",
      };

      // File type detection based on extension
      function getFileType(filename) {
        const ext = filename.split(".").pop().toLowerCase();

        if (["pdf"].includes(ext)) return "pdf";
        if (["doc", "docx"].includes(ext)) return "word";
        if (["xls", "xlsx", "csv"].includes(ext)) return "excel";
        if (["ppt", "pptx"].includes(ext)) return "powerpoint";
        if (["zip", "rar", "7z", "tar", "gz"].includes(ext)) return "archive";
        if (
          ["js", "html", "css", "py", "java", "cpp", "c", "php"].includes(ext)
        )
          return "code";
        if (["jpg", "jpeg", "png", "gif", "svg", "bmp"].includes(ext))
          return "image";
        if (["mp4", "avi", "mov", "mkv"].includes(ext)) return "video";
        if (["mp3", "wav", "ogg"].includes(ext)) return "audio";
        if (["txt", "rtf", "md"].includes(ext)) return "text";

        return "default";
      }

      // DOM elements
      const fileListElement = document.getElementById("fileList");
      const loadingIndicator = document.getElementById("loadingIndicator");
      const emptyStateElement = document.getElementById("emptyState");
      const searchBox = document.getElementById("searchBox");
      const fileCountElement = document.getElementById("fileCount");

      // Current file data
      let allFiles = [];
      let displayedFiles = [];

      // Initialize the page
      document.addEventListener("DOMContentLoaded", function () {
        // In a real implementation, you would fetch actual file data here
        // For demonstration, we'll use sample data after a short delay
        setTimeout(loadFiles, 800);

        // Set up search functionality
        searchBox.addEventListener("input", filterFiles);
      });

      // Load files - in real implementation, this would fetch from server
      function loadFiles() {
        // Simulate loading delay
        setTimeout(() => {
          // For this demo, we're using sample data
          // In a real scenario, you would fetch actual file information
          // Example using GitHub API for a repository:
          // fetch('https://api.github.com/repos/username/repo/contents/data')
          //   .then(response => response.json())
          //   .then(data => {
          //      // Process the file data
          //   });

          allFiles = sampleFiles.map((file) => ({
            ...file,
            type: getFileType(file.name),
            // In real implementation, the download URL would be constructed
            // based on your GitHub Pages URL structure
            url: `/data/${encodeURIComponent(file.name)}`,
          }));

          displayedFiles = [...allFiles];

          // Hide loading indicator
          loadingIndicator.style.display = "none";

          // Render files
          renderFiles();

          // Update file count
          updateFileCount();
        }, 300);
      }

      // Render the file list
      function renderFiles() {
        // Clear current list
        fileListElement.innerHTML = "";

        if (displayedFiles.length === 0) {
          emptyStateElement.style.display = "block";
          return;
        }

        emptyStateElement.style.display = "none";

        // Create list items for each file
        displayedFiles.forEach((file) => {
          const listItem = document.createElement("li");
          listItem.className = "file-item";

          listItem.innerHTML = `
                    <div class="file-info">
                        <div class="file-icon">${
                          fileTypeIcons[file.type] || fileTypeIcons.default
                        }</div>
                        <div>
                            <div class="file-name">${file.name}</div>
                            <div class="file-size">${file.size}</div>
                        </div>
                    </div>
                    <a href="${file.url}" class="download-btn" download="${
            file.name
          }">
                        Download
                    </a>
                `;

          fileListElement.appendChild(listItem);
        });
      }

      // Filter files based on search query
      function filterFiles() {
        const searchTerm = searchBox.value.toLowerCase().trim();

        if (searchTerm === "") {
          displayedFiles = [...allFiles];
        } else {
          displayedFiles = allFiles.filter((file) =>
            file.name.toLowerCase().includes(searchTerm)
          );
        }

        renderFiles();
        updateFileCount();
      }

      // Update the file count display
      function updateFileCount() {
        const count = displayedFiles.length;
        const total = allFiles.length;

        if (count === total) {
          fileCountElement.textContent = `(${count} files)`;
        } else {
          fileCountElement.textContent = `(${count} of ${total} files)`;
        }
      }

      // In a real implementation with GitHub Pages, you might need to handle
      // actual file listing. Here's an example approach:

      // Option 1: Create a JSON file in your data folder that lists all files
      // Then fetch it: fetch('/data/files.json').then(...)

      // Option 2: Use GitHub API (only works for public repositories)
      // Note: This requires CORS and might have rate limits

      async function fetchFilesFromGitHub() {
        // Replace with your GitHub username and repository name
        const username = "HabibThealien";
        const repo = "multi";
        const path = "data"; // The folder containing your files

        try {
          const response = await fetch(
            `https://api.github.com/repos/${username}/${repo}/contents/${path}`
          );
          const data = await response.json();

          // Process GitHub API response
          allFiles = data.map((item) => ({
            name: item.name,
            size: formatFileSize(item.size),
            type: getFileType(item.name),
            url: item.download_url, // GitHub provides direct download URL
          }));

          displayedFiles = [...allFiles];
          loadingIndicator.style.display = "none";
          renderFiles();
          updateFileCount();
        } catch (error) {
          console.error("Error fetching files:", error);
          loadingIndicator.innerHTML =
            "<p>Error loading files. Please try again later.</p>";
        }
      }

      // Helper function to format file size
      function formatFileSize(bytes) {
        if (bytes === 0) return "0 Bytes";
        const k = 1024;
        const sizes = ["Bytes", "KB", "MB", "GB"];
        const i = Math.floor(Math.log(bytes) / Math.log(k));
        return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + " " + sizes[i];
      }
    </script>
  </body>
</html>
